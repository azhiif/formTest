<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
  const SUPABASE_URL = "https://YOUR_PROJECT.supabase.co";
  const SUPABASE_ANON_KEY = "YOUR_ANON_KEY";

  // Correct global object:
  const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

  async function loadItems() {
    const tableBody = document.querySelector("#itemsTable tbody");
    tableBody.innerHTML = "<tr><td colspan='4'>Loading...</td></tr>";

    const { data, error } = await supabase
      .from("items")
      .select("*")
      .order("id", { ascending: false });

    if (error) {
      tableBody.innerHTML = "<tr><td colspan='4'>Error loading items</td></tr>";
      return;
    }

    if (!data.length) {
      tableBody.innerHTML = "<tr><td colspan='4'>No items yet</td></tr>";
      return;
    }

    tableBody.innerHTML = "";

    data.forEach(item => {
      tableBody.innerHTML += `
        <tr>
          <td>${item.id}</td>
          <td>${item.name}</td>
          <td>${item.category || "-"}</td>
          <td>${new Date(item.created_at).toLocaleString()}</td>
        </tr>
      `;
    });
  }

  loadItems();
</script>
